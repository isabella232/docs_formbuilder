.. sectionauthor:: Михаил Гусев <mikhail.gusev@nextgis.ru>

.. _ngfb_controls:

Элементы формы и их атрибуты
============================

.. _ngfb_control_text:

Текст
-----

Простой текст, используемый для декорации. *Пример типового использования - для "подписей элементов", когда над элементом для ввода указывается его назначение*. 

Атрибуты:

* **Текст**. Строка с текстом, выводимым на экран.

.. _ngfb_control_space:

Пробел
------

Пустое пространство. *Можно использовать для создания промежутков между группами элементов*.

Атрибуты отсутствуют.

.. _ngfb_control_textedit:

Текстовое поле
--------------

В этот элемент пользователь вводит текст или число. *Пример использования: ФИО человека, собирающего данные*.

Атрибуты:

* **Запоминать последнее значение**. При открытии формы для ввода данных о следующем объекте в элемент подставляется значение, введённое для предыдущего объекта. 
* **Макс. число строк**. Атрибут обозначает, какое максимальное количество строк текста (не символов!) может ввести пользователь в этот элемент.
* **Начальный текст**. Исходный текст.
* **Поле слоя**. Название поля слоя, в которое элемент сохраняет введённое пользователем значение.
* **Только цифры**. Задаёт ограничение пользователю на ввод, когда разрешены только цифры. Примечание: в программе не отслеживается соответствие значения этого атрибута и значения атрибута "Начальный текст".

.. _ngfb_control_combobox:

Список
------

Через этот элемент пользователь выбирает одно значение из нескольких, заранее введённых разработчиком формы, путём нажатия на него и выбора из выпадающего меню. *Пример использования: тип животного в заповеднике*.

Атрибуты:

* **Ввод с поиском**. При наборе слова с клавиатуры в области для ввода из списка выпадают только те значения, которые соответствуют набираемому слову.
* **Запоминать последнее значение**. При открытии формы для ввода данных о следующем объекте в элемент подставляется значение, введённое для предыдущего объекта. 
* **Значения**. Набор значений списка. Заполняется в специальном диалоге (см. ниже). 
* **Поле слоя**. Название поля слоя, в которое элемент сохраняет введённое пользователем значение.
* **Разрешить добавлять значения**. В случае, когда пользователь будет работать с формой на устройстве, ему будет позволено вносить в список свои собственные значения.

Диалог для ввода значений:

Вводите "внутреннее" и "отображаемое" значения в последнюю строку таблицы (специальная строка для добавления). Используйте клавишу Enter для добавления введённых значений. Перемещайтесь по таблице клавишами стрелок или при помощи мыши. Для того чтобы изменить значение - просто начните вводить текст. Для того чтобы задать или отменить значение по умолчанию - нажмите клавишу Enter при выделенной строке таблицы. Чтобы удалить значение - нажмите клавишу Delete при выделенной строке таблицы. В правом верхем углу диалога находятся кнопки:

* Кнопка "Сбросить список". Удаляет все значения в списке, а так же разрывает синхронизацию со справочником NextGIS Web, если она была установлена. Данное действие не может быть отменено.
* Кнопка "Загрузить список значений из словаря NextGIS Web". Единожды загружает список значений из словаря NextGIS Web, не устанавливая никакой связи с сервером. В открывшемся диалоге выберите ресурс типа "Справочник".
* Кнопка "Установить синхронизацию со словарём NextGIS Web". Аналогично кнопке "Загрузить список значений из словаря NextGIS Web", но вместо одиночной загрузки устанавливает синхронизацию с удалённым словарём. Все его изменения на сервере будут отправляться на мобильное устройство. Данную связь можно разорвать при помощи кнопки "Сбросить список".
* Кнопка "Загрузить список значений из CSV файла". В первом открывшемся диалоге выберите файл с расширением .csv, а во втором - выберите две колонки из списка имеющихся, данные из которых будут загружены в список для "внуреннего" и "отображаемого" значений соответственно. 

.. note::
    Проект должен быть создан на основе NextGIS Web соединения для того, чтобы можно было установить какую-либо связь с NextGIS Web в этом диалоге, причём с правильно заданными правами доступа (зависит от логина и пароля).
    
.. note::
    Если в диалоге NextGIS Web отсутствуют ресурсы типа "Справочник" - это может означать отсутствие прав на просмотр данной категории ресурсов. 

.. _ngfb_control_doublecombobox:

Сдвоенный список
----------------

Через этот элемент, визуально состоящий из двух элементов "Список", пользователь выбирает два значения, при том, что набор значений второго (зависимого) списка зависит от выбранного значения в первом (главном). *Пример использования: выбор области + района. Для Хабаровского края - это, например, Амурский и Советско-Гаванский, а для Приморского: Спасский и Лазовский*.

Атрибуты:

* **Запоминать последнее значение**. При открытии формы для ввода данных о следующем объекте в элемент подставляется значение, введённое для предыдущего объекта. 
* **Значения**. В целом аналогично элементу "Список", но используется другой диалог для ввода значений, который позволяет быстро вводить значения в таблицу при помощи клавиши **Tab**. После ввода внутреннего значения и перехода к отображаемому, отображаемое будет заполнено автоматически. Аналогично элементу "Список" выбор значения по умолчанию для главного списка и значений по умолчанию для зависимых списков отображается на их внешнем виде. Все неправильные (пустые) значения будут удалены при нажатии на кнопку Ок.
* **Поле слоя уровня 1**.  Название поля слоя для главного списка, в которое элемент сохраняет введённое пользователем значение.
* **Поле слоя уровня 2**.  Название поля слоя для зависимого списка, в которое элемент сохраняет введённое пользователем значение.

.. _ngfb_control_checkbox:

Флажок
------

Элемент, позволяющий ввести только два значения логического типа: истина или ложь.

Атрибуты:

* **Запоминать последнее значение**. При открытии формы для ввода данных о следующем объекте в элемент подставляется значение, введённое для предыдущего объекта. 
* **Начальное значения**. Истина или ложь.
* **Поле слоя**. Название поля слоя, в которое элемент сохраняет введённое пользователем значение.
* **Текст**. Текст, выводимый в правой части элемента.

.. _ngfb_control_radiogroup:

Радиогруппа
-----------

Элемент, повторяющий назначение элемента "Список", но в отличие от него выводящий все свои значения сразу на экран, что может быть удобнее для тех случаев, когда набор значений небольшой (до десяти).

Атрибуты:

* **Запоминать последнее значение**. При открытии формы для ввода данных о следующем объекте в элемент подставляется значение, введённое для предыдущего объекта. 
* **Значения**. Аналогично элементу "Список".
* **Поле слоя**. Название поля слоя, в которое элемент сохраняет введённое пользователем значение.

.. _ngfb_control_button:

Кнопка
------

Элемент, при нажатии на который, в поле слоя заносится единственное значение, но в отличие от элемента "Флажок", это значение может быть любым, т.к. имеет текстовый формат.

Атрибуты:

* **Значение**. Текстовое значение, записываемое в поле слоя. Если пользователь не нажал на кнопку, значение соответственно не записывается.
* **Поле слоя**. Название поля слоя, в которое элемент сохраняет введённое пользователем значение.
* **Текст**. Заголовок кнопки, выводящийся на экран.

.. _ngfb_control_datetime:

Дата и время
------------

Элемент, записывающий в соответствующее поле значение даты, времени или даты+времени, причём либо введённое пользователем, либо определённое системой на момент ввода данных об объекте.

Атрибуты:

* **Запоминать последнее значение**. При открытии формы для ввода данных о следующем объекте в элемент подставляется значение, введённое для предыдущего объекта. 
* **Начальное значение**. Может быть установлено в "текущее дата/время", а может быть задано фиксированным.
* **Поле слоя**. Название поля слоя, в которое элемент сохраняет введённое пользователем значение.
* **Тип**. Выбор типа значения из трёх: дата, время или дата+время.

.. _ngfb_control_photo:

Фото
----

Элемент, позволяющий пользователю добавить несколько фотографий к текущей записи в слое.

Атрибуты:

* **Макс. число фото**. Количество добавляемых фотографий, не больше.

.. _ngfb_control_signature:

Подпись
-------

Элемент, позволяющий поставить официальную подпись.

Атрибуты отсутствуют.

.. _ngfb_control_coords:

Координаты
----------

Элемент, который автоматически вводит в выбранные поля слоя значения широты и долготы в текстовом виде. 

Атрибуты:

* **Поле слоя для долготы**. Название поля слоя, в которое элемент сохраняет долготу.
* **Поле слоя для широты**. Название поля слоя, в которое элемент сохраняет широту.
* **Система координат**. Система координат для широты и долготы.
* **Скрыть**. Позволяет не показывать данный элемент на форме.
* **Формат**. В каком формате записывать широту и долготу.

.. _ngfb_control_counter:

Счётчик
-------

Элемент, который автоматически записывает инкрементируемое значение в заданном текстовом формате. 

Атрибуты:

* **Инкремент**. Значение, прибавляемое к текущему значению элемента каждый раз, когда пользователь вводит данные об объекте.
* **Начальное значение**. Начальное значение, с чего начинается инкремент.
* **Поле слоя**. Название поля слоя, в которое элемент сохраняет генерируемое значение.
* **Префикс**. Текст, добавляемый перед значением.
* **Суффикс**. Текст, добавляемый после значения.

