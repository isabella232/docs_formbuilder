.. sectionauthor:: Михаил Гусев <mikhail.gusev@nextgis.ru>

.. _ngfb_features:

Возможности программы
=====================

.. _ngfb_new_form:

Способы создания новой формы
----------------------------

Нажмите на одну из трёх первых кнопок основного меню раздела "Проект" и в открывшемся диалоге сделайте выбор для создания новой формы.

С нуля
^^^^^^

Этот способ можно выбрать, если у вас отсутствует исходный слой и/или вы хотите сами определить состав и структуру полей слоя с самого начала. В открывшемся диалоге (кнопка "Новый") выберите геометрию будущего слоя: 

* POINT (Точка); 
* LINESTRING (Линия); 
* POLYGON (Полигон); 
* MULTIPOINT (Мультиточка); 
* MULTYLINESTRING (Мультилиния); 
* MULTIPOLYGON (Мультиполигон); 

.. note::
    Слой для формы создастся автоматически при сохранении проекта. Созданный слой будет иметь систему координат WGS84. 

Из Esri Shapefile
^^^^^^^^^^^^^^^^^

В открывшемся диалоге (кнопка "Новый из Shapefile") выберите исходный Shapefile.  

.. note::
    Данные из выбранного Shapefile-а будут скопированы в момент первого сохранения проекта. В момент копирования их геометрии (только первое поле) будут трансформированы в систему координат WGS84.

Из подключения к NextGIS Web
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

В открывшемся диалоге (кнопка "Новый из NextGIS Web") задайте настройки для подключения к NextGIS Web: исходный Url, логин и пароль, после чего нажмите кнопку "Соединить". Если соединение было успешным, то дерево доступных ресурсов будет выведено в контейнер ниже.  Раскрывайте каждый из ресурсов для просмотра его подресурсов и выбрав итоговый - нажмите кнопку "Выбрать". Поддерживаются только векторные и PostGIS ресурсы. 

.. note::
    Данные слоя из выбранного подключения будут скопированы в момент первого сохранения проекта. В момент копирования их геометрии (только первое поле) будут трансформированы в систему координат WGS84. 

.. note::
    В итоговом .ngfp файле будут сохранены настройки подключения, в т.ч. и пароль. В настройках приложения так же будут храниться настройки последнего успешного подключения, но за исключением пароля.

.. _ngfb_save_form:

Сохранение формы
----------------

Нажмите на кнопку с изображением дискеты "Сохранить как" или "Сохранить" основного меню в закладке "Проект". В первом случае будет предложено выбрать путь и имя для записи или перезаписи итогового .ngfp файла, а во втором - сохранение произойдёт в открытый в данный момент .ngfp проект сразу же.

.. note::
    Все данные слоя в .ngfp файле пересохраняются каждый раз при вызове "Сохранить" или "Сохранить как", что вызвано особенностью zip-формата файла ngfp.

.. _ngfb_clear_form:

Очистка формы
-------------

Удалить все элементы формы можно при помощи инструмента "Очистить экран" в закладке "Инструменты" основного меню. Каждый элемент в отдельности можно удалить при помощи инструмента "Удалить элемент" или клавишей **delete**.

.. note::
    Удаление элементов нельзя отменить.

.. _ngfb_import_controls:

Импорт элементов
----------------

Элементы формы так же можно импортировать из уже существующей формы. Для этого в закладке "Инструменты" основного меню нажмите на инструмент "Импортировать элементы формы" и в появившемся диалоге выберите файл с расширением .ngfp. После чего форма полностью обновится элементами из этого файла.

.. note::
    Процедура импорта элементов полностью удалит все элементы, имевшиеся на форме до этого. Данное действие нельзя отменить. 

.. _ngfb_update_data:

Обновление данных слоя
----------------------

Для обновления данных низлежащего слоя нажмите на инструмент "Обновить данные слоя" в закладке "Инструменты" основного меню. В появившемся диалоге выберите Shapefile, данные из которого должны быть "затянуты" в слой проекта для замены старых данных . Если структура полей выбранного Shapefile-а совпадает со структурой полей текущего слоя, то сохранение данных в ngfp-файл текущего проекта произойдёт сразу же, иначе будет выдано сообщение об ошибке.

.. _ngfb_field_manager:

Менеджер полей
--------------

Список полей слоя можно изменять в любой момент работы с программой. Для этого используйте инструмент "Менеджер полей", окно которого представлено на :numref:`ngfb_fields_dialog_pic`. 

.. figure:: _static/ngfb_fields_dialog.png
   :name: ngfb_fields_dialog_pic
   :align: center
   :height: 7cm
   
   Диалог редактирования полей слоя проекта.

Добавляйте новые поля при помощи кнопки "+", предварительно введя их имя и выбрав тип данных. Имена полей должны быть уникальны. Для уже существующего поля изменить его тип нельзя. Удалять поля можно при помощи кнопки "-", предварительно выбрав их в списке. Важно, что если удалить существующее поле слоя, то все соответствующие этому полю данные объектов слоя будут удалены (даже если после этого добавить новое поле с таким же именем), о чём предупредит всплывающее сообщение. 

.. note::
    Реальное изменение состава полей в слое и соответствующие удаления (если они были) произойдут в момент сохранения проекта. При нажатии на кнопку "ОК" в диалоге - изменения произойдут только для элементов на форме.